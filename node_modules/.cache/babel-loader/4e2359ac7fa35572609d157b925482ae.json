{"ast":null,"code":"var _jsxFileName = \"/home/kartik/Desktop/Comment-Box/src/Components/CommentList.jsx\";\nimport Comment from './Comment.jsx';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport Paper from 'material-ui/Paper';\nimport React from 'react';\nimport { List } from 'material-ui/List';\nimport CommentForm from './CommentForm.jsx';\n\nclass CommentList extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      showComments: false,\n      comments: []\n    };\n  }\n  /**This function runs before render method,\n   * Fetching data from source for the first time*/\n\n\n  componentWillMount() {\n    var commentList = {\n      comments: []\n    };\n\n    if (!localStorage.getItem('comments')) {\n      localStorage.setItem('comments', JSON.stringify(commentList));\n    }\n  }\n  /**This function runs after render method\n   * Polling data from server every 60 seconds */\n\n\n  componentDidMount() {\n    this._fetchComments();\n\n    this._timer = setInterval(() => this._fetchComments(), 60000);\n  }\n\n  componentWillUnmount() {\n    /**Clearing closed intervals(_timer here) in Single Page Apps will prevent memory leaks */\n    clearInterval(this._timer);\n  }\n\n  _getCommentList() {\n    return JSON.parse(localStorage.getItem('comments')).comments.map(comment => {\n      return React.createElement(Comment, {\n        key: comment.id,\n        author: comment.author,\n        body: comment.body,\n        onDelete: this._deleteComment.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      });\n    });\n  }\n\n  _getCommentTitle(comments) {\n    if (comments.length === 0) {\n      return React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"No comments yet\");\n    } else if (comments.length === 1) {\n      return React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \" 1 comment\");\n    } else {\n      return React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, comments.length, \" comments\");\n    }\n  }\n\n  _handleClick() {\n    this.setState({\n      showComments: !this.state.showComments // comments: localStorage.getItem('comments')\n\n    });\n  }\n\n  render() {\n    const comments = this._getCommentList();\n\n    let commentHtml,\n        buttonText = 'Show Comments';\n\n    if (this.state.showComments) {\n      commentHtml = comments;\n      buttonText = 'Hide Comments';\n    }\n\n    return React.createElement(\"div\", {\n      style: {\n        margin: '0 auto',\n        width: '600px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(CommentForm, {\n      addComment: this._addComment.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        padding: '15px',\n        backgroundColor: '#696969'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(RaisedButton, {\n      onClick: this._handleClick.bind(this),\n      label: buttonText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })), React.createElement(Paper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: {\n        padding: '15px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, this._getCommentTitle(comments)), commentHtml)));\n  }\n  /**-----------------\n   * AJAX CALLS\n   * ----------------*/\n\n\n  _fetchComments() {\n    // $.ajax({\n    // \t//\turl: './api/comments'\n    // \turl: './Data/comments.json',\n    // \ttype: 'GET',\n    // \tdataType: 'json',\n    // \tcache: false,\n    // \tsuccess: (comments)=> {\n    // \t\tthis.setState({comments})\n    // \t},\n    // });\n    // let value = localStorage.getItem('author')\n    // value = JSON.parse(value)\n    // this.setState({[author})\n    // console.log(value)\n    // this.setState({comments})\n    // console.log(localStorage.getItem('comment'))\n    console.log('fetched data!');\n  }\n\n  _deleteComment(comment) {\n    /**\n    $.ajax({\n    \tmethod: 'DELETE',\n    \turl: `./api/comments/${comment.id}`\n    \t}) */\n    console.log('deleted!');\n    /** ... using spread operator to clone existing array */\n\n    const comments = [...this.state.comments];\n    const commentIndex = comments.indexOf(comment);\n    comments.splice(commentIndex, 1);\n    this.setState({\n      comments\n    });\n  }\n\n  _addComment(author, body) {\n    /**\n     const comment = { author, body}\n     $.post('api/comments', {comment})\n      .success(newComment => {\n    \t\tthis.setState({comments: this.state.comments.concat([comment]});\n      });\n     */\n    const comment = {\n      id: this.state.comments.length + 1,\n      author,\n      body\n    };\n    this.setState({\n      comments: this.state.comments.concat([comment])\n    }); // localStorage.setItem('comment',JSON.stringify(this.state.comments));\n\n    console.log('added!');\n  }\n\n} // module.exports = CommentList;\n\n\nexport default CommentList;","map":{"version":3,"sources":["/home/kartik/Desktop/Comment-Box/src/Components/CommentList.jsx"],"names":["Comment","RaisedButton","Paper","React","List","CommentForm","CommentList","Component","constructor","state","showComments","comments","componentWillMount","commentList","localStorage","getItem","setItem","JSON","stringify","componentDidMount","_fetchComments","_timer","setInterval","componentWillUnmount","clearInterval","_getCommentList","parse","map","comment","id","author","body","_deleteComment","bind","_getCommentTitle","length","_handleClick","setState","render","commentHtml","buttonText","margin","width","_addComment","padding","backgroundColor","console","log","commentIndex","indexOf","splice","concat"],"mappings":"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","sourcesContent":["import Comment from './Comment.jsx';\nimport RaisedButton from 'material-ui/RaisedButton'\nimport Paper from 'material-ui/Paper'\nimport React from 'react';\nimport {List} from 'material-ui/List';\nimport CommentForm from './CommentForm.jsx'\n\n\nclass CommentList extends React.Component {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tshowComments: false,\n\t\t\tcomments: []\n\t\t};\n\t}\n\n\n\t/**This function runs before render method,\n\t * Fetching data from source for the first time*/\n\tcomponentWillMount() {\n\t\tvar commentList = \n\t\t{\n\t\t\tcomments : \n\t\t\t[]\n\t\t}\n\n\t\tif(!localStorage.getItem('comments')){\n\t\t\tlocalStorage.setItem('comments',JSON.stringify(commentList));\n\t\t}\n\t}\n\n\t/**This function runs after render method\n\t * Polling data from server every 60 seconds */\n\n\tcomponentDidMount() {\n\t\tthis._fetchComments();\n\n\t\tthis._timer = setInterval(() => this._fetchComments(), 60000);\n\t}\n\n\tcomponentWillUnmount() {\n\t\t/**Clearing closed intervals(_timer here) in Single Page Apps will prevent memory leaks */\n\t\tclearInterval(this._timer);\n\n\t}\n\n\t_getCommentList() {\n\t\treturn JSON.parse(localStorage.getItem('comments')).comments.map((comment) => {\n\t\t\treturn (<Comment key={comment.id}\n\t\t\t\t\t\t\t\t\t\t\t author={comment.author}\n\t\t\t\t\t\t\t\t\t\t\t body={comment.body}\n\t\t\t\t\t\t\t\t\t\t\t onDelete={this._deleteComment.bind(this)}\n\t\t\t\t/>\n\t\t\t)\n\t\t});\n\t}\n\n\t_getCommentTitle(comments) {\n\t\tif (comments.length === 0) {\n\t\t\treturn (<span>No comments yet</span>);\n\t\t}\n\t\telse if (comments.length === 1) {\n\t\t\treturn (<span> 1 comment</span>);\n\t\t}\n\t\telse {\n\t\t\treturn (<span>{comments.length} comments</span>);\n\t\t}\n\t}\n\n\t_handleClick() {\n\t\tthis.setState({\n\t\t\tshowComments: !this.state.showComments,\n\t\t\t// comments: localStorage.getItem('comments')\n\n\t\t});\n\t}\n\n\n\n\trender() {\n\n\t\tconst comments = this._getCommentList();\n\t\tlet commentHtml, buttonText = 'Show Comments';\n\n\t\tif (this.state.showComments) {\n\t\t\tcommentHtml = comments;\n\t\t\tbuttonText = 'Hide Comments'\n\t\t}\n\n\t\treturn (\n\t\t\t<div style={{margin:'0 auto', width:'600px'}}>\n\t\t\t\t<List>\n\t\t\t\t\t<CommentForm addComment={this._addComment.bind(this)}/>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t\t<div style={{padding:'15px', backgroundColor:'#696969'}}>\n\t\t\t\t\t\t\t<RaisedButton onClick={this._handleClick.bind(this)} label={buttonText}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t<h2 style={{padding:'15px'}}>{this._getCommentTitle(comments)}</h2>\n\t\t\t\t\t{\n\t\t\t\t\t\tcommentHtml\n\t\t\t\t\t}\n\t\t\t\t\t\t</Paper>\n\t\t\t\t</List>\n\t\t\t</div>\n\t\t)\n\t}\n\n\n\t/**-----------------\n\t * AJAX CALLS\n\t * ----------------*/\n\n\t_fetchComments() {\n\t\t// $.ajax({\n\t\t// \t//\turl: './api/comments'\n\t\t// \turl: './Data/comments.json',\n\t\t// \ttype: 'GET',\n\t\t// \tdataType: 'json',\n\t\t// \tcache: false,\n\t\t// \tsuccess: (comments)=> {\n\t\t// \t\tthis.setState({comments})\n\t\t// \t},\n\t\t// });\n\n\t\t// let value = localStorage.getItem('author')\n\t\t// value = JSON.parse(value)\n\t\t// this.setState({[author})\n\t\t// console.log(value)\n\t\t// this.setState({comments})\n\t\t// console.log(localStorage.getItem('comment'))\n\t\tconsole.log('fetched data!');\n\t}\n\t_deleteComment(comment) {\n\t\t/**\n\t\t$.ajax({\n\t\t\tmethod: 'DELETE',\n\t\t\turl: `./api/comments/${comment.id}`\n\n\t\t}) */\n\t\tconsole.log('deleted!');\n\t\t/** ... using spread operator to clone existing array */\n\t\tconst comments = [...this.state.comments];\n\t\tconst commentIndex = comments.indexOf(comment);\n\t\tcomments.splice(commentIndex, 1);\n\t\tthis.setState({comments});\n\t}\n\t_addComment(author, body) {\n\n\t\t/**\n\t\t const comment = { author, body}\n\t\t $.post('api/comments', {comment})\n\t\t  .success(newComment => {\n\t\t\t\tthis.setState({comments: this.state.comments.concat([comment]});\n\t\t  });\n\t\t */\n\t\tconst comment = {\n\t\t\tid: this.state.comments.length + 1,\n\t\t\tauthor,\n\t\t\tbody\n\t\t};\n\n\t\tthis.setState({comments: this.state.comments.concat([comment])});\n\t\t// localStorage.setItem('comment',JSON.stringify(this.state.comments));\n\t\tconsole.log('added!')\n\t}\n\n\n}\n// module.exports = CommentList;\n\nexport default CommentList;"]},"metadata":{},"sourceType":"module"}